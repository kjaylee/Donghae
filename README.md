# Donghae

Donghae는 Rust로 구현된, QUIC 프로토콜과 **PoH(Proof of History)**를 적용하고 Swarm Intelligence(군집 지능) 기반의 합의 알고리즘을 사용하는 P2P(피어 투 피어) 블록체인 네트워크입니다. "Donghae"는 한국어로 **"동해(東海)"**를 의미하며, 동쪽 바다의 넓고 깊은 이미지를 통해 블록체인의 **확장성**과 **신뢰성**을 상징합니다.

---

## 목차

1. [소개](#소개)
2. [Donghae의 주요 특징](#donghae의-주요-특징)
   - [1. Rust로 구현된 안전하고 효율적인 코드베이스](#1-rust로-구현된-안전하고-효율적인-코드베이스)
   - [2. QUIC 프로토콜을 통한 네트워크 통신 최적화](#2-quic-프로토콜을-통한-네트워크-통신-최적화)
   - [3. PoH(Proof of History)를 통한 시간 순서 증명](#3-pohproof-of-history를-통한-시간-순서-증명)
   - [4. Swarm Intelligence 기반의 합의 알고리즘](#4-swarm-intelligence-기반의-합의-알고리즘)
   - [5. P2P 네트워크 구조와 DHT를 통한 피어 디스커버리](#5-p2p-네트워크-구조와-dht를-통한-피어-디스커버리)
   - [6. 블록체인의 확장성과 유연성](#6-블록체인의-확장성과-유연성)
   - [7. 보안과 프라이버시 강화](#7-보안과-프라이버시-강화)
   - [8. 간단하고 직관적인 합의 프로세스](#8-간단하고-직관적인-합의-프로세스)
   - [9. 고효율의 네트워크 자원 사용](#9-고효율의-네트워크-자원-사용)
   - [10. 지역적 정체성과 글로벌 지향성](#10-지역적-정체성과-글로벌-지향성)
   - [11. 커뮤니티 중심의 발전 방향](#11-커뮤니티-중심의-발전-방향)
3. [Donghae의 가상머신(Virtual Machine) 설계](#donghae의-가상머신virtual-machine-설계)
   - [1. WASM 기반 가상머신 도입 배경](#1-wasm-기반-가상머신-도입-배경)
   - [2. WASM 실행 환경 통합](#2-wasm-실행-환경-통합)
   - [3. 스마트 컨트랙트 개발 프로세스](#3-스마트-컨트랙트-개발-프로세스)
   - [4. 호스트 함수 및 API 설계](#4-호스트-함수-및-api-설계)
   - [5. 보안 고려 사항](#5-보안-고려-사항)
   - [6. 자원 관리 및 가스 모델](#6-자원-관리-및-가스-모델)
   - [7. Donghae 합의 알고리즘과의 통합](#7-donghae-합의-알고리즘과의-통합)
   - [8. 상태 관리 및 스토리지](#8-상태-관리-및-스토리지)
   - [9. 도구 및 개발자 경험](#9-도구-및-개발자-경험)
4. [요약](#요약)

---

## 소개

**Donghae**는 **Rust**로 구현된, **QUIC 프로토콜**과 **PoH(Proof of History)**를 적용하고 **Swarm Intelligence(군집 지능)** 기반의 합의 알고리즘을 사용하는 **P2P(피어 투 피어)** 블록체인 네트워크입니다. "Donghae"는 한국어로 **"동해(東海)"**를 의미하며, 동쪽 바다의 넓고 깊은 이미지를 통해 블록체인의 **확장성**과 **신뢰성**을 상징합니다.

---

## Donghae의 주요 특징

### 1. Rust로 구현된 안전하고 효율적인 코드베이스

- **메모리 안전성**: Rust의 엄격한 컴파일 타임 검사로 메모리 안전성을 확보하여 버퍼 오버플로우 등의 취약점을 방지합니다.
- **고성능**: Rust는 C/C++ 수준의 성능을 제공하면서도 안전성을 유지하여 블록체인의 처리 속도를 향상시킵니다.
- **병행성 지원**: Rust의 병행성 모델을 활용하여 멀티스레드 환경에서 효율적인 노드 운영이 가능합니다.

### 2. QUIC 프로토콜을 통한 네트워크 통신 최적화

- **낮은 지연 시간**: QUIC은 TCP보다 빠른 연결 수립과 데이터 전송을 제공하여 블록 전파 속도를 향상시킵니다.
- **UDP 기반 전송**: UDP를 기반으로 하여 방화벽 및 NAT 환경에서도 원활한 통신이 가능합니다.
- **다중화 스트림 지원**: 한 연결 내에서 여러 스트림을 동시에 전송하여 효율적인 데이터 교환을 실현합니다.
- **내장된 암호화**: QUIC은 TLS 1.3을 내장하여 보안성을 강화합니다.

### 3. PoH(Proof of History)를 통한 시간 순서 증명

- **시간 순서 보장**: PoH를 사용하여 블록의 생성 시간과 순서를 암호학적으로 증명합니다.
- **높은 처리량 지원**: PoH는 합의 알고리즘과 결합하여 네트워크의 처리량을 향상시킵니다.
- **신뢰성 강화**: 이벤트 간의 시간 간격을 정확하게 기록하여 블록체인의 무결성을 유지합니다.

### 4. Swarm Intelligence 기반의 합의 알고리즘

- **분산된 합의 도출**: 중앙 제어 없이 노드 간의 로컬 상호작용을 통해 효율적인 합의에 도달합니다.
- **간단한 규칙 적용**: 각 노드는 단순한 행동 규칙을 따르며, 전체적으로 복잡한 합의 프로세스를 형성합니다.
- **확장성과 강인성**: 노드 수가 증가해도 성능 저하가 적고, 일부 노드의 장애에도 안정적으로 운영됩니다.

### 5. P2P 네트워크 구조와 DHT를 통한 피어 디스커버리

- **분산 해시 테이블(DHT) 사용**: 토렌트에서 사용하는 DHT를 활용하여 피어들의 주소를 공유하고 발견합니다.
- **중앙 서버 없이 동작**: 완전한 P2P 구조로 중앙화된 서버 없이도 네트워크를 운영합니다.
- **libp2p 통합**: P2P 네트워킹을 위한 라이브러리인 libp2p를 사용하여 네트워크 기능을 구현합니다.

### 6. 블록체인의 확장성과 유연성

- **동적 노드 참여**: 노드들은 언제든지 네트워크에 참여하거나 떠날 수 있으며, 네트워크는 이에 유연하게 대응합니다.
- **빠른 블록 전파**: QUIC과 Swarm Intelligence의 결합으로 블록 전파 속도를 최적화합니다.
- **확장 가능한 구조**: 설계 단계부터 확장성을 고려하여 대규모 네트워크에서도 안정적으로 동작합니다.

### 7. 보안과 프라이버시 강화

- **암호화된 통신**: QUIC의 TLS 1.3 지원으로 노드 간 통신이 암호화됩니다.
- **노드 인증**: 노드들은 인증서를 사용하여 상호 신뢰를 구축합니다.
- **악의적인 노드 대응**: Swarm Intelligence와 추가적인 보안 메커니즘으로 악의적인 행위를 식별하고 대응합니다.

### 8. 간단하고 직관적인 합의 프로세스

- **가장 긴 체인 선택**: 노드들은 가장 긴 유효한 체인을 선택하여 블록체인의 일관성을 유지합니다.
- **블록 검증 프로토콜**: 블록의 해시, 이전 해시, PoH 값 등을 검증하여 유효성을 확인합니다.
- **로컬 정보 활용**: 노드들은 이웃 노드들과의 정보 교환을 통해 합의를 도출합니다.

### 9. 고효율의 네트워크 자원 사용

- **메시지 전달 최적화**: 중복 전파를 방지하고 필요한 경우에만 메시지를 전송하여 네트워크 부하를 줄입니다.
- **에너지 효율성**: PoW와 달리 에너지 집약적인 연산을 필요로 하지 않아 에너지 소비를 절감합니다.

### 10. 지역적 정체성과 글로벌 지향성

- **이름의 상징성**: "Donghae"은 동해의 이미지를 담아 지역적 정체성을 반영합니다.
- **글로벌 확장 목표**: 국제적으로 사용 가능한 기술 스택과 프로토콜을 사용하여 글로벌 네트워크로의 확장을 지향합니다.

### 11. 커뮤니티 중심의 발전 방향

- **오픈 소스 프로젝트**: 코드를 공개하여 개발자 커뮤니티와 협력합니다.
- **지속적인 업데이트**: 최신 기술과 연구 결과를 반영하여 지속적으로 개선합니다.
- **개발자 친화성**: Rust의 장점을 활용하여 개발자들이 쉽게 참여하고 기여할 수 있습니다.

---

## Donghae의 가상머신(Virtual Machine) 설계

Donghae는 스마트 컨트랙트 실행을 위해 **WASM(WebAssembly)** 기반의 가상머신을 도입합니다. 이를 통해 안전하고 효율적인 스마트 컨트랙트 환경을 제공하며, 개발자들은 Rust 등 다양한 언어를 사용하여 컨트랙트를 개발할 수 있습니다.

### 1. WASM 기반 가상머신 도입 배경

- **Rust와의 호환성**: WASM은 Rust로 작성된 코드를 효율적으로 실행할 수 있어 Donghae의 Rust 기반 코드베이스와 자연스럽게 통합됩니다.
- **다양한 언어 지원**: WASM은 C/C++, Go 등 여러 언어를 지원하여 개발자 생태계를 확장합니다.
- **안전하고 효율적**: WASM은 샌드박스 환경에서 코드를 실행하여 보안을 강화하고, 빠른 실행 속도를 제공합니다.
- **미래 지향성**: WASM은 웹과 블록체인 모두에서 주목받는 기술로, 생태계가 빠르게 성장하고 있습니다.

### 2. WASM 실행 환경 통합

- **WASM 런타임 엔진 선택**: Rust로 구현된 Wasmtime 또는 Wasmer를 사용하여 Donghae 노드에 WASM 런타임을 통합합니다.
- **실행 흐름**:
  1. **트랜잭션 수신**: 노드는 스마트 컨트랙트 실행 요청을 수신합니다.
  2. **검증 및 로드**: WASM 바이트코드를 검증하고 런타임에 로드합니다.
  3. **호스트 함수 바인딩**: 블록체인과 상호작용할 수 있도록 호스트 함수를 바인딩합니다.
  4. **실행**: WASM 인스턴스에서 스마트 컨트랙트를 실행합니다.
  5. **상태 업데이트**: 실행 결과에 따라 블록체인의 상태를 업데이트합니다.

### 3. 스마트 컨트랙트 개발 프로세스

- **언어 선택**: Rust를 기본 언어로 채택하며, WASM을 지원하는 다른 언어도 지원합니다.
- **개발 도구 체인**: `wasm-pack`, `cargo-web` 등을 사용하여 컨트랙트를 WASM으로 컴파일합니다.
- **SDK 제공**: Donghae 전용 SDK를 제공하여 개발자들이 쉽게 컨트랙트를 작성할 수 있도록 지원합니다.
- **배포 프로세스**:
  - 개발자가 작성한 컨트랙트를 WASM 바이트코드로 컴파일합니다.
  - 컴파일된 모듈을 Donghae 네트워크에 배포하기 위한 트랜잭션을 생성합니다.
  - 노드들은 모듈을 수신하고 검증하여 저장합니다.

### 4. 호스트 함수 및 API 설계

- **호스트 함수 개요**: 스마트 컨트랙트가 블록체인 상태 및 기능에 접근할 수 있도록 호스트 함수를 제공합니다.
- **주요 호스트 함수**:
  - 상태 읽기/쓰기: `get_state`, `set_state`
  - 이벤트 발생: `emit_event`
  - 트랜잭션 정보 접근: `get_caller`, `get_transaction_value`
  - 암호화 함수: `sha256`
  - 시간 및 블록 정보: `get_block_timestamp`, `get_block_height`
- **호스트 함수 구현**: WASM의 외부 함수로 등록하여 스마트 컨트랙트에서 호출할 수 있도록 합니다.

### 5. 보안 고려 사항

- **샌드박스 환경**: WASM의 샌드박스 특성을 활용하여 컨트랙트 실행을 격리합니다.
- **바이트코드 검증**: WASM 바이트코드를 사전 검증하여 무효한 코드 실행을 차단합니다.
- **자원 사용 제한**: 실행 시간을 제한하고 가스 모델을 적용하여 자원 사용을 관리합니다.
- **권한 및 인증**: 호출자의 신원을 확인하고 권한 없는 상태 변경을 방지합니다.

### 6. 자원 관리 및 가스 모델

- **가스 모델 도입 이유**: 자원 사용을 공정하게 분배하고 네트워크 남용을 방지하기 위함입니다.
- **가스 비용 산정**:
  - 연산 비용: WASM 명령어별 가스 소비량 정의
  - 호스트 함수 비용: 각 함수 호출에 가스 비용 부과
- **가스 한도 및 처리**:
  - 실행 전에 예상 가스 소비량을 계산하고 한도를 설정합니다.
  - 한도를 초과하면 실행을 중단하고 사용되지 않은 가스는 환불합니다.
- **수수료 처리**: 수집된 가스 비용은 네트워크 유지와 노드 인센티브로 사용됩니다.

### 7. Donghae 합의 알고리즘과의 통합

- **PoH와의 연계**: PoH를 통해 컨트랙트 실행 순서를 정확하게 기록하고, 상태의 일관성을 유지합니다.
- **Swarm Intelligence와의 통합**: 노드 간 로컬 상호작용을 통해 컨트랙트의 상태를 효율적으로 동기화합니다.
- **합의 과정에서의 검증**: 블록 생성 시 포함된 컨트랙트 실행 결과를 다른 노드들이 검증하여 신뢰성을 확보합니다.

### 8. 상태 관리 및 스토리지

- **상태 저장소 구조**:
  - 계정 모델: 각 컨트랙트는 고유한 주소를 가지며, 해당 주소에 상태를 저장합니다.
  - Merkle Trie 사용: 상태 데이터를 효율적으로 관리하고 검증합니다.
- **스토리지 API**: 호스트 함수를 통해 키-값 형태로 데이터를 저장하고 조회합니다.
- **데이터 지속성**: 노드는 블록체인 상태를 디스크에 저장하여 재시작 후에도 상태를 유지합니다.

### 9. 도구 및 개발자 경험

- **개발자 도구 제공**:
  - Donghae SDK: 컨트랙트 개발을 위한 라이브러리와 도구 제공
  - CLI 도구: 배포, 테스트, 디버깅 지원
  - IDE 통합: 개발 생산성 향상
- **테스트 및 디버깅 환경**:
  - 로컬 테스트넷: 로컬에서 노드를 실행하여 컨트랙트를 테스트
  - 시뮬레이션 도구: 가스 소비량과 성능 분석
  - 디버깅 지원: WASM의 디버깅 정보를 활용
- **문서화 및 교육 자료**:
  - 개발자 문서: SDK 사용법, 호스트 함수 API, 가스 모델 등
  - 튜토리얼 및 예제: 단계별 가이드와 예제 코드 제공
  - 커뮤니티 지원: 포럼, 채팅방 등을 통해 개발자 지원

---

## 요약

Donghae는 현대적인 네트워크 기술과 블록체인 개념을 결합하여 **높은 성능**, **확장성**, **보안성**을 제공하는 혁신적인 블록체인 플랫폼입니다. Rust로 구현되어 안전하고 효율적인 코드베이스를 갖추고 있으며, QUIC 프로토콜과 PoH, Swarm Intelligence 등의 최신 기술을 도입하여 네트워크의 효율성과 안정성을 높였습니다.

또한, WASM 기반의 가상머신을 도입하여 스마트 컨트랙트 실행 환경을 구축함으로써 개발자들이 Rust 등 다양한 언어를 사용하여 안전하고 효율적인 dApp을 개발할 수 있도록 지원합니다. 이를 통해 Donghae는 풍부한 dApp 생태계를 형성하고 글로벌 블록체인 시장에서 경쟁력을 갖출 수 있을 것으로 기대됩니다.

---

# 참고 자료

- **WebAssembly 공식 웹사이트**: [https://webassembly.org/](https://webassembly.org/)
- **Wasmtime 프로젝트**: [https://github.com/bytecodealliance/wasmtime](https://github.com/bytecodealliance/wasmtime)
- **Wasmer 프로젝트**: [https://wasmer.io/](https://wasmer.io/)
- **Rust와 WASM 개발**: [https://rustwasm.github.io/](https://rustwasm.github.io/)
- **Donghae 프로젝트 GitHub**: *Donghae 프로젝트의 저장소 링크를 여기에 추가*

---
